"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2922],{90427:function(e,n,t){t.d(n,{q:function(){return r}});var o=t(85893),i=(t(67294),t(8920)),a=t(67265),r=function(e){var n=e.name,t=e.avatarUrl,r=e.isFootwayEmployee,l=(0,i.Z)(),s=n?n.charAt(0).toUpperCase():"";return(0,o.jsx)(a.Z,{src:t,style:{backgroundColor:r?l.palette.primary.main:void 0},children:s})}},8317:function(e,n,t){t.d(n,{h:function(){return m}});var o=t(85893),i=t(67294),a=t(80343),r=t(40305),l=t(37702),s=t(64364),c=t(27610);function u(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],o=!0,i=!1,a=void 0;try{for(var r,l=e[Symbol.iterator]();!(o=(r=l.next()).done)&&(t.push(r.value),!n||t.length!==n);o=!0);}catch(s){i=!0,a=s}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var d=(0,s.I)("DropdownMenu",(function(e){return{root:{},button:{}}})),m=function(e){var n=e.onClose,t=e.onClick,s=e.isOpen,m=e.items,p=e.renderMenuButton,f=d(),g=u(i.useState(null),2),v=g[0],x=g[1];return(0,o.jsxs)(a.Z,{className:f.root,children:[p({handleClick:function(e){x(e.currentTarget),t()}}),(0,o.jsx)(r.Z,{keepMounted:!0,open:s,onClose:function(){x(null),n()},anchorEl:v,children:m.map((function(e,n){return(0,o.jsx)(l.Z,{onClick:e.onClick,children:(0,o.jsx)(c._,{children:e.label})},n)}))})]})}},72922:function(e,n,t){t.d(n,{S:function(){return h}});var o=t(85893),i=t(67294),a=t(64364),r=t(90427),l=t(33609),s=t(92198),c=t(47856),u=t(97948),d=t(89772),m=t(27610),p=(0,a.I)("Reply",(function(e){return{root:{display:"flex",flexDirection:"column",marginTop:e.spacing(1.25),marginBottom:function(n){return n.showGetMoreReplies?e.spacing(4):0}},replyWrapper:{display:"flex"},avatarWrapper:{display:"flex",flexDirection:"column",alignItems:"center"},avatarLine:{flexGrow:1,marginTop:e.spacing(1.25),width:"1px",backgroundColor:e.palette.divider},contentWrapper:{flexGrow:1},postActions:{marginTop:e.spacing(1)},textField:{margin:e.spacing(.5,0)},moreButton:{display:"inline-block",margin:"".concat(e.spacing(.5),"px ").concat(e.spacing(1.5),"px 0")}}})),f=function(e){var n=e.postUuid,t=e.commentUuid,a=e.reply,l=e.viewer,f=e.translations,g=e.locale,v=e.showAvatarLine,x=void 0!==v&&v,h=e.actions,y=e.showGetMoreReplies,j=e.onGetMoreReplies,w=p({showGetMoreReplies:y}),b=(0,i.useState)(!1),N=b[0],k=b[1],C=N||x||y;return(0,o.jsxs)("div",{className:w.root,children:[(0,o.jsxs)("div",{className:w.replyWrapper,children:[(0,o.jsxs)("div",{className:w.avatarWrapper,children:[(0,o.jsx)(r.q,{name:a.author.displayName,avatarUrl:a.author.avatar,isFootwayEmployee:a.author.isFootwayEmployee}),C&&(0,o.jsx)("div",{className:w.avatarLine})]}),(0,o.jsxs)("div",{className:w.contentWrapper,children:[(0,o.jsx)(s.C,{locale:g,createdAt:a.createdAt,isContained:!0,body:a.body,author:a.author}),(0,o.jsx)(c.t,{className:w.postActions,translations:f,likeCount:a.likeCount,isLiked:a.isLikedByViewer,onToggleLike:function(){return h.reply.toggleLike(a.uuid,a)},showRestrictedActions:a.isOwnedByViewer,isCommentActive:N,onToggleComment:function(){k(!N)},onDelete:function(){return h.reply.delete(a.uuid)},onReport:function(){return h.reply.report(a.uuid)}}),y&&(0,o.jsx)(d.r,{className:w.moreButton,onClick:j,children:(0,o.jsx)(m._,{children:f.showMoreReplies})})]})]}),N&&(0,o.jsx)(u.k,{className:w.textField,commentPlaceholder:f.commentPlaceholder,name:l.displayName,isFootwayEmployee:l.isFootwayEmployee,onSubmit:function(e){k(!1),h.reply.submit(e,{postUuid:n,commentUuid:t})},autoFocus:!0})]})},g=(0,a.I)("Comment",(function(e){return{root:{display:"flex",flexDirection:"column",marginTop:e.spacing(1.25)},commentWrapper:{display:"flex"},avatarWrapper:{display:"flex",flexDirection:"column",alignItems:"center"},avatarLine:{flexGrow:1,marginTop:e.spacing(1.25),width:"1px",backgroundColor:e.palette.divider},contentWrapper:{flexGrow:1},postActions:{marginTop:e.spacing(1)},textField:{margin:e.spacing(.5,0)}}})),v=function(e){var n,t,a,l,d=e.postUuid,m=e.comment,p=e.viewer,v=e.translations,x=e.locale,h=e.actions,y=e.onGetMoreReplies,j=g(),w=(0,i.useState)(!1),b=w[0],N=w[1],k=(null===m||void 0===m||null===(n=m.replies)||void 0===n||null===(t=n.comments)||void 0===t?void 0:t.length)||0,C=b||k>0,A=function(){var e,n;y(d,m.uuid,null===m||void 0===m||null===(e=m.replies)||void 0===e||null===(n=e.pageInfo)||void 0===n?void 0:n.endCursor)};return(0,o.jsxs)("div",{className:j.root,children:[(0,o.jsxs)("div",{className:j.commentWrapper,children:[(0,o.jsxs)("div",{className:j.avatarWrapper,children:[(0,o.jsx)(r.q,{name:m.author.displayName,avatarUrl:m.author.avatar,isFootwayEmployee:m.author.isFootwayEmployee}),C&&(0,o.jsx)("div",{className:j.avatarLine})]}),(0,o.jsxs)("div",{className:j.contentWrapper,children:[(0,o.jsx)(s.C,{locale:x,createdAt:m.createdAt,isContained:!0,body:m.body,author:m.author}),(0,o.jsx)(c.t,{className:j.postActions,translations:v,likeCount:m.likeCount,isLiked:m.isLikedByViewer,onToggleLike:function(){return h.comment.toggleLike(m.uuid,m)},showRestrictedActions:m.isOwnedByViewer,isCommentActive:b,onToggleComment:function(){N(!b)},onDelete:function(){return h.comment.delete(m.uuid)},onReport:function(){return h.comment.report(m.uuid)}})]})]}),b&&(0,o.jsx)(u.k,{className:j.textField,commentPlaceholder:v.commentPlaceholder,name:p.displayName,isFootwayEmployee:p.isFootwayEmployee,onSubmit:function(e){N(!1),h.reply.submit(e,{postUuid:d,commentUuid:m.uuid})},autoFocus:!0}),(0,o.jsx)("div",{className:"reply-feed-placeholder",children:null===(a=m.replies)||void 0===a||null===(l=a.comments)||void 0===l?void 0:l.map((function(e,n){var t,i;return(0,o.jsx)(f,{postUuid:d,commentUuid:m.uuid,reply:e,viewer:p,translations:v,locale:x,showAvatarLine:n<k-1,actions:h,showGetMoreReplies:!!(null===m||void 0===m||null===(t=m.replies)||void 0===t||null===(i=t.pageInfo)||void 0===i?void 0:i.hasNext)&&n===k-1,onGetMoreReplies:A},e.uuid)}))})]})},x=(0,a.I)("Post",(function(e){return{root:{display:"flex"},avatarWrapper:{display:"flex",flexDirection:"column",alignItems:"center"},postContent:{padding:e.spacing(0,1.5,1.5,1.5)},avatarLine:{flexGrow:1,marginTop:e.spacing(1.25),width:"1px",backgroundColor:e.palette.divider},contentWrapper:{flexGrow:1},postActions:{marginTop:e.spacing(1)},textField:{margin:e.spacing(.5,0)},moreButton:{marginLeft:e.spacing(-.5)}}})),h=function(e){var n,t,a,d,p,f,g=e.post,h=e.viewer,y=e.translations,j=e.locale,w=e.actions,b=e.onGetMoreComments,N=e.onGetMoreReplies,k=x(),C=(0,i.useState)(!1),A=C[0],I=C[1],F=(null===g||void 0===g||null===(n=g.comments)||void 0===n||null===(t=n.comments)||void 0===t?void 0:t.length)||0,L=A||F>0;return(0,o.jsxs)("div",{className:k.root,children:[(0,o.jsxs)("div",{className:k.avatarWrapper,children:[(0,o.jsx)(r.q,{name:g.author.displayName,avatarUrl:g.author.avatar,isFootwayEmployee:g.author.isFootwayEmployee}),L&&(0,o.jsx)("div",{className:k.avatarLine})]}),(0,o.jsxs)("div",{className:k.contentWrapper,children:[(0,o.jsx)(s.C,{className:k.postContent,locale:j,createdAt:g.createdAt,body:g.body,author:g.author,media:g.media}),(0,o.jsx)(c.t,{className:k.postActions,translations:y,likeCount:g.likeCount,isLiked:g.isLikedByViewer,onToggleLike:function(){return w.post.toggleLike(g.uuid,g)},showRestrictedActions:g.isOwnedByViewer,isCommentActive:A,onToggleComment:function(){I(!A)},onDelete:function(){return w.post.delete(g.uuid)},onReport:function(){return w.post.report(g.uuid)}}),A&&(0,o.jsx)(u.k,{className:k.textField,commentPlaceholder:y.commentPlaceholder,name:h.displayName,isFootwayEmployee:h.isFootwayEmployee,onSubmit:function(e){I(!1),w.comment.submit(e,{postUuid:g.uuid})},autoFocus:!0}),(0,o.jsxs)("div",{className:"comment-feed",children:[null===g||void 0===g||null===(a=g.comments)||void 0===a||null===(d=a.comments)||void 0===d?void 0:d.map((function(e){return(0,o.jsx)(v,{postUuid:g.uuid,comment:e,viewer:h,locale:j,translations:y,actions:w,onGetMoreReplies:N},e.uuid)})),(null===g||void 0===g||null===(p=g.comments)||void 0===p||null===(f=p.pageInfo)||void 0===f?void 0:f.hasNext)&&(0,o.jsx)(l.z,{color:"secondary",variant:"text",className:k.moreButton,onClick:function(){var e,n;b(null===g||void 0===g?void 0:g.uuid,null===g||void 0===g||null===(e=g.comments)||void 0===e||null===(n=e.pageInfo)||void 0===n?void 0:n.endCursor)},children:(0,o.jsx)(m._,{children:y.showMoreComments})})]})]})]})}},47856:function(e,n,t){t.d(n,{t:function(){return x}});var o=t(85893),i=t(67294),a=t(64364),r=t(86010),l=t(46333),s=t(93905),c=(0,a.I)("LabelWithIcon",(function(e){return{root:{display:"flex",alignItems:"center",justifyContent:"center"},icon:{marginRight:"2px",padding:"5px",display:"flex",alignItems:"center",justifyContent:"center","& svg":{fontSize:e.typography.fontSize,fill:e.palette.secondary.light}}}})),u=function(e){var n=e.text,t=e.icon,i=e.className,a=c();return(0,o.jsxs)("div",{className:(0,r.Z)(a.root,i),children:[(0,o.jsx)("div",{className:a.icon,children:function(){if("string"!==typeof t)return t;switch(t){case"like":return(0,o.jsx)(l.J,{icon:s.GN.ThumbsUp});case"comment":return(0,o.jsx)(l.J,{icon:s.GN.Comment});default:return null}}()}),n]})},d=t(33609),m=t(27068),p=t(8317),f=t(27610);function g(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var v=(0,a.I)("PostActions",(function(e){return{root:{display:"flex"},likeCount:{flex:1,display:"flex",alignItems:"center",color:e.palette.global.grey},button:{flex:3,color:e.palette.global.grey,marginLeft:e.spacing(1)},buttonTitle:(n={color:e.palette.global.grey,marginLeft:e.spacing(1)},t=e.breakpoints.down("sm"),o={display:"none"},t in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o,n),menuButtonWrapper:{flex:1}};var n,t,o})),x=function(e){var n=e.translations,t=e.isCommentActive,a=e.isLiked,c=e.likeCount,x=e.onToggleLike,h=e.onToggleComment,y=e.onDelete,j=e.onReport,w=e.showRestrictedActions,b=void 0!==w&&w,N=e.className,k=void 0===N?"":N,C=v(),A=(0,i.useState)(!1),I=A[0],F=A[1],L=[{label:n.delete,onClick:function(){F(!1),y()}}],T=g(b?L:[]).concat([{label:n.report,onClick:function(){F(!1),j()}}]);return(0,o.jsxs)("div",{className:(0,r.Z)(C.root,k),children:[(0,o.jsx)(u,{className:C.likeCount,text:c,icon:"like"}),(0,o.jsxs)(d.z,{variant:"text",disableTextTransform:!0,className:C.button,onClick:x,children:[(0,o.jsx)(l.J,{icon:a?s.GN.ThumbsUp:s.GN.ThumbsUpOutlined}),(0,o.jsx)(f._,{className:C.buttonTitle,children:n.like})]}),(0,o.jsxs)(d.z,{variant:"text",disableTextTransform:!0,className:C.button,onClick:h,children:[(0,o.jsx)(l.J,{icon:t?s.GN.Comment:s.GN.CommentOutlined}),(0,o.jsx)(f._,{className:C.buttonTitle,children:n.comment})]}),(0,o.jsx)("div",{className:C.menuButtonWrapper,children:(0,o.jsx)(p.h,{isOpen:I,onClose:function(){return F(!1)},onClick:function(){return F(!0)},items:T,renderMenuButton:function(e){var n=e.handleClick;return(0,o.jsx)(m.h,{onClick:n,className:C.button,children:(0,o.jsx)(l.J,{icon:s.GN.Ellipsis,fontSize:"small"})})}})})]})}},92198:function(e,n,t){t.d(n,{C:function(){return d}});var o=t(85893),i=(t(67294),t(64364)),a=t(52165),r=t(25675),l=t(86010),s=t(27610);function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var u=(0,i.I)("PostContent",(function(e){return{root:c({marginLeft:e.spacing(1),flex:1,display:"inline-block",width:"100%"},e.breakpoints.up("sm"),{width:"80%"}),contained:c({backgroundColor:e.palette.grey[200],borderRadius:e.spacing(3),padding:e.spacing(1.5),width:"auto"},e.breakpoints.up("sm"),{width:"auto",maxWidth:"80%"}),image:{width:"100%",borderRadius:e.spacing(.5),marginTop:e.spacing(1)},likes:{flex:1,display:"flex",alignItems:"center",color:e.palette.global.grey},preserveLineBreaks:{whiteSpace:"pre-line"}}})),d=function(e){var n,t=e.author,i=e.body,c=e.createdAt,d=e.locale,m=e.isContained,p=void 0!==m&&m,f=e.className,g=e.media,v=u(),x=d.substring(3).toLowerCase(),h=t.isFootwayEmployee?"".concat(t.displayName,", Footway"):t.displayName;return(0,o.jsx)("div",{className:(0,l.Z)(v.root,f,p&&v.contained),children:(0,o.jsxs)(s._,{className:v.preserveLineBreaks,children:[(0,o.jsxs)(s._,{bold:!0,children:[h," "]}),i,g&&g.length>0&&(0,o.jsx)(r.default,{className:v.image,src:null===(n=g[0])||void 0===n?void 0:n.src,objectFit:"contain",height:"320",width:"568"}),(0,o.jsx)(s._,{className:v.likes,children:a.WU(c,x)})]})})}},97948:function(e,n,t){t.d(n,{k:function(){return f}});var o=t(85893),i=t(67294),a=t(90427),r=t(27068),l=t(46333),s=t(93905),c=t(80343),u=t(74061),d=t(7397),m=t(86010);var p=(0,t(64364).I)("TextFieldWithAvatar",(function(e){return{root:{display:"flex",alignItems:"flex-end"},avatarWrapper:{padding:e.spacing(.5,0)},textField:{margin:e.spacing(0,0,0,2),backgroundColor:e.palette.background.default,flex:1},imageUploadInput:{display:"none"},imagePreviewContainer:{display:"flex",alignItems:"flex-start",background:e.palette.grey[100],margin:e.spacing(0,0,-.5,2),borderRadius:"4px 4px 0 0"},imagePreview:(n={width:"100px",height:"auto",margin:e.spacing(2,0,2.5,2.5),borderRadius:"4px"},t=e.breakpoints.up("sm"),o={width:"200px"},t in n?Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[t]=o,n),imageButton:{marginRight:e.spacing(-1)},removeImageButton:{position:"relative",left:e.spacing(-3),top:e.spacing(-.5)},removeImageButtonIcon:{backgroundColor:"white",borderRadius:"50%"},form:{display:"flex",flexDirection:"column",flex:1}};var n,t,o})),f=function(e){var n=e.commentPlaceholder,t=e.name,f=e.isFootwayEmployee,g=e.onSubmit,v=e.className,x=e.autoFocus,h=e.allowImageUpload,y=p(),j=(0,i.useState)(""),w=j[0],b=j[1],N=(0,i.useRef)(null),k=(0,i.useState)(),C=k[0],A=k[1],I=function(e){e&&e.preventDefault(),w.length>0&&(g(w,{image:C}),b(""),A(void 0))};return(0,o.jsxs)(c.Z,{className:(0,m.Z)(y.root,v),children:[(0,o.jsx)("div",{className:y.avatarWrapper,children:(0,o.jsx)(a.q,{name:t,isFootwayEmployee:f})}),(0,o.jsxs)("form",{onSubmit:I,className:y.form,children:[C&&(0,o.jsxs)("div",{className:y.imagePreviewContainer,children:[(0,o.jsx)("img",{className:y.imagePreview,src:URL.createObjectURL(C),alt:"upload preview"}),(0,o.jsx)(r.h,{className:y.removeImageButton,onClick:function(){return A(void 0)},children:(0,o.jsx)(l.J,{className:y.removeImageButtonIcon,icon:s.GN.Times})})]}),(0,o.jsx)(u.Z,{className:y.textField,value:w,onChange:function(e){return b(e.target.value)},onKeyPress:function(e){"Enter"!==e.key||e.shiftKey||(I(),e.preventDefault())},multiline:!0,maxRows:10,placeholder:n,autoFocus:x,endAdornment:h&&!C&&(0,o.jsxs)(d.Z,{position:"end",children:[(0,o.jsx)("input",{className:y.imageUploadInput,ref:N,type:"file",accept:"image/gif, image/jpeg, image/png",onChange:function(e){return e.target.files&&A(e.target.files[0])}}),(0,o.jsx)(r.h,{className:y.imageButton,onClick:function(){return N.current&&N.current.click()},children:(0,o.jsx)(l.J,{icon:s.GN.Camera})})]})})]}),(0,o.jsx)(r.h,{onClick:I,disabled:0===w.length,children:(0,o.jsx)(l.J,{icon:s.GN.PaperPlane})})]})}}}]);