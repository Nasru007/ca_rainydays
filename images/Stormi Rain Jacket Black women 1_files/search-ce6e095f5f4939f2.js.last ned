(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9603],{70755:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return r(74566)}])},49344:function(e,t,r){"use strict";r.r(t),r.d(t,{CategoryPage:function(){return m},__N_SSP:function(){return y},default:function(){return h}});var n=r(85893),a=r(67294),o=r(11163),i=r(13272),l=r(23791),u=r(46719),d=r(52544),v=r(89402),s=r(48574),c=r(29527),f=r(83251);function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){g(e,t,r[t])}))}return e}var y=!0,m=function(e){var t,r,g,y,m,h,b,P,_,w,O,S,k,q,N,C,j,E=e.storefront,B=(0,o.useRouter)(),F=(0,c.$Y)().selectedSortingOption,T=(0,f.ZR)(),G=(0,a.useState)(Number(B.query.page||1)),x=G[0],M=G[1],z=(0,a.useContext)(d.xf);(0,a.useEffect)((function(){M(Number(B.query.page||1))}),[B.asPath]);var L=(0,l.C)(z.navigationFilters),V=function(e){var t=e.term,r=void 0===t?"":t,n=e.limit,a=void 0===n?u.p:n,o=e.page,i=void 0===o?1:o,l=e.facets,d=e.sortBy,c=e.startPage,f=void 0===c||c,g=(0,s.y)();return(0,v.VTD)({variables:{term:r,limit:a,offset:(i-1)*u.p,facets:l,sortBy:d,startPage:f,provider:g}})}({term:(null===(t=B.query.term)||void 0===t?void 0:t.toString())||"",page:x,sortBy:F||z.defaultSortOption.key,facets:L,startPage:!1}),Z=(0,v.z5s)({variables:{term:B.query.term||""}}).data,A=(0,v.htM)({variables:{selectedFilters:L.map((function(e){return{key:e.type,optionValue:e.value}}))},skip:!!B.query.term}).data,D=Object.keys(B.query).filter((function(e){return"page"!==e})).map((function(e){return{key:e,value:B.query[e]}})).filter((function(e){var t=e.value;return!Array.isArray(t)})),K=D.map((function(e){return e.value})).join(" "),R=1===D.length&&"brand"===D[0].key?"primary_tag.valueGlobal":"primary_tag.valueLocal",X=(0,v.lGM)({variables:{term:K,searchField:R}});if(V.error)return"Error";var I,U,Y=function(e){var t=B.asPath.split("?")[0];B.push({pathname:t,query:p({},B.query,{page:e})},void 0,{shallow:!0})},$=Math.ceil((null===V||void 0===V||null===(r=V.data)||void 0===r||null===(g=r.search)||void 0===g?void 0:g.total)/u.p),H=(0,l.Z)(null===V||void 0===V||null===(y=V.data)||void 0===y||null===(m=y.search)||void 0===m?void 0:m.facets,z.navigationFilters);return(0,n.jsx)(i.Z,{onStartPage:!1,header:null===X||void 0===X||null===(h=X.data)||void 0===h?void 0:h.header,description:null===X||void 0===X||null===(b=X.data)||void 0===b?void 0:b.description,images:null===X||void 0===X||null===(P=X.data)||void 0===P?void 0:P.images,products:null===V||void 0===V||null===(_=V.data)||void 0===_||null===(w=_.search)||void 0===w?void 0:w.products,widgets:null===V||void 0===V||null===(O=V.data)||void 0===O||null===(S=O.search)||void 0===S?void 0:S.widgets,filterFacets:H,contentLoading:null===X||void 0===X?void 0:X.loading,productsLoading:null===V||void 0===V?void 0:V.loading,totalProducts:null===V||void 0===V||null===(k=V.data)||void 0===k||null===(q=k.search)||void 0===q?void 0:q.total,newProducts:void 0,totalPages:$,currentPage:x,term:B.query.term,handleNextPage:function(){var e=x+1;V.fetchMore({variables:{term:B.query.term||"",limit:u.p,offset:(e-1)*u.p}}),M(e),T.flags.enableInfiniteScroll||Y(e)},handlePreviousPage:function(){var e=x-1;M(e),Y(e)},handlePageChange:function(e){M(e),Y(e)},storefront:E,userGeneratedContent:(I=null===X||void 0===X||null===(N=X.data)||void 0===N?void 0:N.userGeneratedContentByUrlKey,U=null===X||void 0===X||null===(C=X.data)||void 0===C?void 0:C.userGeneratedContentByTerm,U?U.concat(I):I),magazine:null===Z||void 0===Z?void 0:Z.magazine,googleTestimonials:null===X||void 0===X||null===(j=X.data)||void 0===j?void 0:j.googleTestimonials,articleBlock:null===A||void 0===A?void 0:A.articleSearch,appliedFilters:L.map((function(e){return{filterKey:e.type,optionValue:e.value}}))})},h=m},74566:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return a},default:function(){return n.default}});var n=r(49344),a=!0}},function(e){e.O(0,[6659,5331,4637,8584,5426,5337,2450,2943,3272,9774,2888,179],(function(){return t=70755,e(e.s=t);var t}));var t=e.O();_N_E=t}]);